function shouldUsePointerLock(gameTitle, gameUrl) {
            const title = (gameTitle || '').toLowerCase();
            const url = (gameUrl || '').toLowerCase();
            
            // Check if it's a known FPS/3D game that needs pointer lock
            const needsPointerLock = POINTER_LOCK_GAMES.some(keyword => 
                title.includes(keyword) || url.includes(keyword)
            );
            
            // Check if it's a known 2D/puzzle game that doesn't need pointer lock
            const avoidsPointerLock = NON_POINTER_LOCK_GAMES.some(keyword => 
                title.includes(keyword) || url.includes(keyword)
            );
            
            if (avoidsPointerLock) return false;
            if (needsPointerLock) return true;
            
            // Default: if uncertain, don't use pointer lock
            return false;
        }
        
        // Enhanced particle system
        function createAdvancedParticles() {
            const container = document.getElementById('particles-container');
            if (!container) return;
            
            // Create different types of particles
            const particleTypes = ['small', 'medium', 'large'];
            const particleCounts = [30, 20, 10];
            
            particleTypes.forEach((type, index) => {
                for (let i = 0; i < particleCounts[index]; i++) {
                    const particle = document.createElement('div');
                    particle.className = `particle ${type}`;
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 30 + 's';
                    particle.style.animationDuration = (Math.random() * 10 + 20) + 's';
                    container.appendChild(particle);
                }
            });
        }
        
        // Notification system
        function showNotification(message, type = 'info', duration = 3000) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.classList.add('show'), 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => document.body.removeChild(notification), 400);
            }, duration);
        }
        
        // Advanced unlock system
        function unlockGNMath() {
            const overlay = document.getElementById('vortex-overlay');
            if (!overlay) return;
            
            showNotification('Accessing advanced features...', 'success');
            
            // Smooth fade out animation
            overlay.style.transition = 'opacity 0.8s ease-out';
            overlay.style.opacity = '0';
            
            setTimeout(() => {
                overlay.style.display = 'none';
                
                // Enhanced focus management
                setTimeout(() => {
                    try {
                        const frame = document.getElementById('zoneFrame');
                        if (frame && frame.contentWindow) {
                            frame.contentWindow.focus();
                            frame.contentWindow.document.body && frame.contentWindow.document.body.focus();
                        } else {
                            document.body.focus();
                        }
                    } catch(e) {
                        console.log('Focus management:', e);
                    }
                }, 200);
            }, 800);
        }
        
        // Advanced hotspot system with visual feedback
        (function initHotspotSystem() {
            const hotspot = document.getElementById('secret-hotspot');
            if (!hotspot) return;
            
            const timestamps = [];
            let clickCount = 0;
            
            hotspot.addEventListener('click', () => {
                const now = Date.now();
                timestamps.push(now);
                clickCount++;
                
                // Visual feedback (invisible but logged)
                console.log(`Secret click ${clickCount}/5`);
                
                // Keep only recent clicks
                while (timestamps.length > 5) timestamps.shift();
                
                if (timestamps.length === 5 && (now - timestamps[0]) <= 2000) {
                    console.log('Secret sequence completed!');
                    unlockGNMath();
                }
            });
            
            hotspot.style.opacity = 0;
            hotspot.style.pointerEvents = 'auto';
        })();
        
        // Comprehensive flashcard system
        class FlashcardManager {
            constructor() {
                this.currentDeck = 'mathematics';
                this.currentCardIndex = 0;
                this.isFlipped = false;
                this.studyStats = {
                    mastered: 0,
                    learning: 0,
                    accuracy: 0,
                    totalAnswered: 0,
                    correctAnswers: 0
                };
                
                this.decks = {
                    mathematics: {
                        name: "Mathematics",
                        icon: "📐",
                        cards: [
                            {q: "What is the derivative of sin(x)?", a: "cos(x)", difficulty: "medium"},
                            {q: "Solve for x: 2x + 5 = 15", a: "x = 5", difficulty: "easy"},
                            {q: "What is the quadratic formula?", a: "x = (-b ± √(b²-4ac)) / 2a", difficulty: "hard"},
                            {q: "Factor: x² - 9", a: "(x + 3)(x - 3)", difficulty: "medium"},
                            {q: "What is the slope-intercept form?", a: "y = mx + b", difficulty: "easy"},
                            {q: "Evaluate: log₁₀(100)", a: "2", difficulty: "medium"},
                            {q: "What is the Pythagorean theorem?", a: "a² + b² = c²", difficulty: "easy"},
                            {q: "Simplify: (x²)³", a: "x⁶", difficulty: "medium"},
                            {q: "What is 0! (zero factorial)?", a: "1", difficulty: "medium"},
                            {q: "Convert to decimal: 3/4", a: "0.75", difficulty: "easy"},
                            {q: "What is the area of a circle?", a: "πr²", difficulty: "easy"},
                            {q: "Solve: |x - 3| = 7", a: "x = 10 or x = -4", difficulty: "hard"},
                            {q: "What is e approximately?", a: "2.71828", difficulty: "medium"},
                            {q: "Factor: x² + 5x + 6", a: "(x + 2)(x + 3)", difficulty: "medium"},
                            {q: "What is the distance formula?", a: "d = √((x₂-x₁)² + (y₂-y₁)²)", difficulty: "hard"},
                            {q: "Evaluate: 3² × 3³", a: "3⁵ = 243", difficulty: "medium"},
                            {q: "What is sin(30°)?", a: "1/2 or 0.5", difficulty: "medium"},
                            {q: "Solve: 2^x = 8", a: "x = 3", difficulty: "medium"},
                            {q: "What is the sum of angles in a triangle?", a: "180°", difficulty: "easy"},
                            {q: "Simplify: √(16x⁴)", a: "4x²", difficulty: "medium"},
                            {q: "What is the vertex form of a parabola?", a: "y = a(x - h)² + k", difficulty: "hard"},
                            {q: "Evaluate: ∫x dx", a: "x²/2 + C", difficulty: "hard"},
                            {q: "What is cos(60°)?", a: "1/2 or 0.5", difficulty: "medium"},
                            {q: "Factor: 4x² - 1", a: "(2x + 1)(2x - 1)", difficulty: "medium"},
                            {q: "What is the binomial theorem?", a: "(a + b)ⁿ = Σ(ⁿCₖ)aⁿ⁻ᵏbᵏ", difficulty: "hard"}
                        ]
                    },
                    science: {
                        name: "Science",
                        icon: "🔬",
                        cards: [
                            {q: "What is the chemical symbol for gold?", a: "Au", difficulty: "easy"},
                            {q: "What is the powerhouse of the cell?", a: "Mitochondria", difficulty: "easy"},
                            {q: "What is Newton's first law?", a: "An object at rest stays at rest", difficulty: "medium"},
                            {q: "What is the pH of pure water?", a: "7", difficulty: "easy"},
                            {q: "What gas do plants absorb?", a: "Carbon dioxide (CO₂)", difficulty: "easy"},
                            {q: "Speed of light in vacuum?", a: "299,792,458 m/s", difficulty: "hard"},
                            {q: "How many chromosomes do humans have?", a: "46 (23 pairs)", difficulty: "medium"},
                            {q: "Atomic number of carbon?", a: "6", difficulty: "easy"},
                            {q: "What force keeps planets in orbit?", a: "Gravitational force", difficulty: "medium"},
                            {q: "Chemical formula for water?", a: "H₂O", difficulty: "easy"},
                            {q: "What bonds hold DNA strands?", a: "Hydrogen bonds", difficulty: "medium"},
                            {q: "Hardest natural substance?", a: "Diamond", difficulty: "easy"},
                            {q: "Closest planet to the Sun?", a: "Mercury", difficulty: "easy"},
                            {q: "Unit of electrical resistance?", a: "Ohm (Ω)", difficulty: "medium"},
                            {q: "Most abundant gas in atmosphere?", a: "Nitrogen (78%)", difficulty: "medium"}
                        ]
                    },
                    history: {
                        name: "History",
                        icon: "📚",
                        cards: [
                            {q: "When did World War II end?", a: "1945", difficulty: "easy"},
                            {q: "First US President?", a: "George Washington", difficulty: "easy"},
                            {q: "When did the Berlin Wall fall?", a: "1989", difficulty: "medium"},
                            {q: "Julius Caesar ruled which empire?", a: "Roman Empire", difficulty: "easy"},
                            {q: "American Civil War start?", a: "1861", difficulty: "medium"},
                            {q: "Who wrote Declaration of Independence?", a: "Thomas Jefferson", difficulty: "medium"},
                            {q: "French Revolution start?", a: "1789", difficulty: "medium"},
                            {q: "Columbus reached Americas?", a: "1492", difficulty: "easy"},
                            {q: "Egyptian queen with Mark Antony?", a: "Cleopatra", difficulty: "medium"},
                            {q: "Industrial Revolution began?", a: "Mid-18th century (1760s)", difficulty: "hard"},
                            {q: "World War I years?", a: "1914-1918", difficulty: "medium"},
                            {q: "First person on moon?", a: "Neil Armstrong", difficulty: "easy"},
                            {q: "Soviet Union collapsed?", a: "1991", difficulty: "medium"},
                            {q: "Lighthouse of Alexandria location?", a: "Alexandria, Egypt", difficulty: "hard"},
                            {q: "Who was the Iron Lady?", a: "Margaret Thatcher", difficulty: "medium"}
                        ]
                    },
                    languages: {
                        name: "Languages",
                        icon: "🌍",
                        cards: [
                            {q: "'Hello' in Spanish?", a: "Hola", difficulty: "easy"},
                            {q: "What does 'Bonjour' mean?", a: "Hello/Good morning", difficulty: "easy"},
                            {q: "'Thank you' in German?", a: "Danke", difficulty: "easy"},
                            {q: "What does 'Arigato' mean?", a: "Thank you (Japanese)", difficulty: "easy"},
                            {q: "'Goodbye' in Italian?", a: "Ciao or Arrivederci", difficulty: "medium"},
                            {q: "What does 'Ni hao' mean?", a: "Hello (Chinese)", difficulty: "easy"},
                            {q: "'Please' in French?", a: "S'il vous plaît", difficulty: "medium"},
                            {q: "What does 'Spasibo' mean?", a: "Thank you (Russian)", difficulty: "medium"},
                            {q: "'Yes' in Portuguese?", a: "Sim", difficulty: "easy"},
                            {q: "What does 'Guten Tag' mean?", a: "Good day (German)", difficulty: "easy"},
                            {q: "'Water' in Spanish?", a: "Agua", difficulty: "easy"},
                            {q: "What does 'Konichiwa' mean?", a: "Hello (Japanese)", difficulty: "easy"},
                            {q: "'Love' in French?", a: "Amour", difficulty: "easy"},
                            {q: "What does 'Gracias' mean?", a: "Thank you (Spanish)", difficulty: "easy"},
                            {q: "'Friend' in German?", a: "Freund", difficulty: "easy"}
                        ]
                    },
                    programming: {
                        name: "Programming",
                        icon: "💻",
                        cards: [
                            {q: "What does HTML stand for?", a: "HyperText Markup Language", difficulty: "easy"},
                            {q: "What is a variable in programming?", a: "A container for storing data", difficulty: "easy"},
                            {q: "What does CSS stand for?", a: "Cascading Style Sheets", difficulty: "easy"},
                            {q: "What is a function?", a: "A reusable block of code", difficulty: "medium"},
                            {q: "What is an array?", a: "A collection of elements", difficulty: "medium"},
                            {q: "What does API stand for?", a: "Application Programming Interface", difficulty: "medium"},
                            {q: "What is recursion?", a: "A function calling itself", difficulty: "hard"},
                            {q: "What is Object-Oriented Programming?", a: "Programming using objects and classes", difficulty: "medium"},
                            {q: "What is Git?", a: "Version control system", difficulty: "medium"},
                            {q: "What is a database?", a: "Organized collection of data", difficulty: "easy"},
                            {q: "What does SQL stand for?", a: "Structured Query Language", difficulty: "medium"},
                            {q: "What is debugging?", a: "Finding and fixing errors in code", difficulty: "easy"},
                            {q: "What is an algorithm?", a: "Step-by-step problem-solving procedure", difficulty: "medium"},
                            {q: "What is machine learning?", a: "AI that learns from data", difficulty: "hard"},
                            {q: "What is cloud computing?", a: "Computing services over the internet", difficulty: "medium"}
                        ]
                    },
                    business: {
                        name: "Business",
                        icon: "💼",
                        cards: [
                            {q: "What is ROI?", a: "Return on Investment", difficulty: "medium"},
                            {q: "What does CEO stand for?", a: "Chief Executive Officer", difficulty: "easy"},
                            {q: "What is market research?", a: "Gathering info about target markets", difficulty: "medium"},
                            {q: "What is a business plan?", a: "Document outlining business goals", difficulty: "easy"},
                            {q: "What is cash flow?", a: "Money moving in and out of business", difficulty: "medium"},
                            {q: "What is branding?", a: "Creating unique identity for business", difficulty: "medium"},
                            {q: "What is supply chain?", a: "Network of suppliers and distributors", difficulty: "medium"},
                            {q: "What is venture capital?", a: "Investment in startup companies", difficulty: "hard"},
                            {q: "What is market segmentation?", a: "Dividing market into distinct groups", difficulty: "hard"},
                            {q: "What is competitive advantage?", a: "Unique benefit over competitors", difficulty: "medium"},
                            {q: "What is digital marketing?", a: "Marketing using digital channels", difficulty: "easy"},
                            {q: "What is customer retention?", a: "Keeping existing customers", difficulty: "medium"},
                            {q: "What is a startup?", a: "New business venture", difficulty: "easy"},
                            {q: "What is intellectual property?", a: "Legal rights to creations", difficulty: "hard"},
                            {q: "What is scaling a business?", a: "Growing business operations", difficulty: "medium"}
                        ]
                    }
                };
                
                this.init();
            }
            
            init() {
                this.bindEvents();
                this.updateStudyStats();
            }
            
            bindEvents() {
                // Deck selection
                document.querySelectorAll('.deck-option').forEach(option => {
                    option.addEventListener('click', () => this.selectDeck(option.dataset.deck));
                });
                
                // Study mode selection
                document.querySelectorAll('.mode-card').forEach(mode => {
                    mode.addEventListener('click', () => this.selectMode(mode.dataset.mode));
                });
                
                // Flashcard flip
                const flashcard = document.getElementById('flashcard');
                if (flashcard) {
                    flashcard.addEventListener('click', () => this.flipCard());
                }
            }
            
            selectDeck(deckKey) {
                if (!this.decks[deckKey]) return;
                
                document.querySelector('.deck-option.active')?.classList.remove('active');
                document.querySelector(`[data-deck="${deckKey}"]`).classList.add('active');
                
                this.currentDeck = deckKey;
                this.currentCardIndex = 0;
                this.isFlipped = false;
                this.updateCard();
                this.updateProgress();
                this.updateStudyStats();
                
                showNotification(`Switched to ${this.decks[deckKey].name} deck`, 'success');
            }
            
            selectMode(mode) {
                document.querySelector('.mode-card.active')?.classList.remove('active');
                document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
                
                showNotification(`Switched to ${mode} mode`, 'info');
            }
            
            updateCard() {
                const deck = this.decks[this.currentDeck];
                const card = deck.cards[this.currentCardIndex];
                
                const questionEl = document.getElementById('card-question');
                const answerEl = document.getElementById('card-answer');
                const currentCardEl = document.getElementById('current-card-num');
                const totalCardsEl = document.getElementById('total-cards-num');
                const deckNameEl = document.getElementById('deck-name-display');
                
                if (questionEl) questionEl.textContent = card.q;
                if (answerEl) answerEl.textContent = card.a;
                if (currentCardEl) currentCardEl.textContent = this.currentCardIndex + 1;
                if (totalCardsEl) totalCardsEl.textContent = deck.cards.length;
                if (deckNameEl) deckNameEl.textContent = deck.name;
                
                const flashcard = document.getElementById('flashcard');
                if (flashcard) {
                    if (this.isFlipped) {
                        flashcard.classList.add('flipped');
                    } else {
                        flashcard.classList.remove('flipped');
                    }
                }
            }
            
            updateProgress() {
                const deck = this.decks[this.currentDeck];
                const progress = ((this.currentCardIndex + 1) / deck.cards.length) * 100;
                const progressFill = document.getElementById('progress-fill');
                if (progressFill) {
                    progressFill.style.width = `${progress}%`;
                }
            }
            
            updateStudyStats() {
                const deck = this.decks[this.currentDeck];
                this.studyStats.learning = deck.cards.length - this.studyStats.mastered;
                
                const masteredEl = document.getElementById('mastered-count');
                const learningEl = document.getElementById('learning-count');
                const accuracyEl = document.getElementById('accuracy-rate');
                
                if (masteredEl) masteredEl.textContent = this.studyStats.mastered;
                if (learningEl) learningEl.textContent = this.studyStats.learning;
                if (accuracyEl) {
                    const accuracy = this.studyStats.totalAnswered > 0 
                        ? Math.round((this.studyStats.correctAnswers / this.studyStats.totalAnswered) * 100)
                        : 0;
                    accuracyEl.textContent = `${accuracy}%`;
                }
            }
            
            flipCard() {
                this.isFlipped = !this.isFlipped;
                this.updateCard();
            }
            
            nextCard() {
                const deck = this.decks[this.currentDeck];
                this.currentCardIndex = (this.currentCardIndex + 1) % deck.cards.length;
                this.isFlipped = false;
                this.updateCard();
                this.updateProgress();
            }
            
            previousCard() {
                const deck = this.decks[this.currentDeck];
                this.currentCardIndex = (this.currentCardIndex - 1 + deck.cards.length) % deck.cards.length;
                this.isFlipped = false;
                this.updateCard();
                this.updateProgress();
            }
        }
        
        // Enhanced login system
        class AuthManager {
            constructor() {
                this.init();
            }
            
            init() {
                const loginForm = document.getElementById('login-form');
                const loginBtn = document.getElementById('loginBtn');
                const userInput = document.getElementById('v-user');
                const passwordInput = document.getElementById('v-password');
                const loginError = document.getElementById('loginError');
                
                if (loginForm) {
                    loginForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.handleLogin(userInput.value.trim(), passwordInput.value.trim());
                    });
                }
                
                // Load saved user data
                this.loadSavedData();
            }
            
            async handleLogin(username, password) {
                const loginBtn = document.getElementById('loginBtn');
                const loginError = document.getElementById('loginError');
                
                if (!username || !password) {
                    this.showError('Please enter both email and password');
                    return;
                }
                
                // Show loading state
                this.setLoading(true);
                
                // Simulate API call delay
                await new Promise(resolve => setTimeout(resolve, 1200));
                
                // Check for secret credentials
                if (username.toLowerCase() === 'artem' && password === 'da goat') {
                    showNotification('Special access granted! 🚀', 'success');
                    setTimeout(() => unlockGNMath(), 1000);
                    return;
                }
                
                // Regular login success
                if (username.length > 3) {
                    this.loginSuccess(username);
                } else {
                    this.showError('Invalid credentials. Please check your email and password.');
                }
                
                this.setLoading(false);
            }
            
            loginSuccess(username) {
                loginError.style.display = 'none';
                showNotification(`Welcome back, ${username}! 🎉`, 'success');
                
                // Show flashcard system
                const flashcardSystem = document.getElementById('flashcard-system');
                const analyticsSection = document.getElementById('analytics-section');
                
                if (flashcardSystem) {
                    flashcardSystem.style.display = 'block';
                    flashcardSystem.classList.add('animate-in');
                }
                
                if (analyticsSection) {
                    setTimeout(() => {
                        analyticsSection.style.display = 'block';
                        analyticsSection.classList.add('animate-in');
                    }, 500);
                }
                
                // Save user data
                try {
                    localStorage.setItem('vortex_user', username);
                    localStorage.setItem('vortex_login_time', Date.now().toString());
                } catch(e) {
                    console.log('Storage not available');
                }
                
                // Initialize flashcard manager
                window.flashcardManager = new FlashcardManager();
            }
            
            showError(message) {
                const loginError = document.getElementById('loginError');
                if (loginError) {
                    loginError.textContent = message;
                    loginError.style.display = 'block';
                }
            }
            
            setLoading(loading) {
                const loginBtn = document.getElementById('loginBtn');
                const btnText = loginBtn.querySelector('.btn-text') || loginBtn;
                
                if (loading) {
                    loginBtn.classList.add('loading');
                    btnText.textContent = 'Signing In...';
                } else {
                    loginBtn.classList.remove('loading');
                    btnText.textContent = 'Begin Study Session';
                }
            }
            
            loadSavedData() {
                try {
                    const savedUser = localStorage.getItem('vortex_user');
                    const userInput = document.getElementById('v-user');
                    
                    if (savedUser && userInput) {
                        userInput.value = savedUser;
                    }
                } catch(e) {
                    console.log('Storage not available');
                }
            }
        }
        
        // Enhanced game support with intelligent pointer lock
        class GameEnhancer {
            constructor() {
                this.init();
            }
            
            init() {
                this.setupEscapeHandler();
                this.setupGameEnhancements();
            }
            
            setupEscapeHandler() {
                let escapeKeyTimer = null;
                let escapeHoldDuration = 0;
                const ESCAPE_HOLD_TIME = 1500;
                
                document.addEventListener('keydown', (ev) => {
                    if (ev.key === 'Escape') {
                        // Only prevent default and require hold if in fullscreen or pointer lock
                        if (document.fullscreenElement || document.pointerLockElement) {
                            ev.preventDefault();
                            ev.stopPropagation();
                            
                            if (!escapeKeyTimer) {
                                escapeHoldDuration = 0;
                                console.log('Hold Escape to exit fullscreen...');
                                
                                escapeKeyTimer = setInterval(() => {
                                    escapeHoldDuration += 50;
                                    if (escapeHoldDuration >= ESCAPE_HOLD_TIME) {
                                        console.log('Exiting fullscreen/pointer lock');
                                        
                                        if (document.fullscreenElement) {
                                            document.exitFullscreen().catch(() => {});
                                        }
                                        if (document.pointerLockElement) {
                                            document.exitPointerLock();
                                        }
                                        
                                        clearInterval(escapeKeyTimer);
                                        escapeKeyTimer = null;
                                        escapeHoldDuration = 0;
                                    }
                                }, 50);
                            }
                        }
                    }
                });
                
                document.addEventListener('keyup', (ev) => {
                    if (ev.key === 'Escape' && escapeKeyTimer) {
                        console.log('Escape released early, staying in fullscreen');
                        clearInterval(escapeKeyTimer);
                        escapeKeyTimer = null;
                        escapeHoldDuration = 0;
                    }
                });
            }
            
            setupGameEnhancements() {
                const frame = document.getElementById('zoneFrame');
                if (!frame) return;
                
                frame.style.pointerEvents = 'auto';
                
                frame.addEventListener('load', () => {
                    setTimeout(() => {
                        this.enhanceGameFrame(frame);
                    }, 500);
                });
                
                // Enhanced fullscreen handling
                document.addEventListener('fullscreenchange', () => {
                    const el = document.fullscreenElement;
                    if (el && frame && (el === frame || frame.contains(el))) {
                        setTimeout(() => this.focusGameFrame(frame), 150);
                    }
                });
                
                document.addEventListener('pointerlockchange', () => {
                    setTimeout(() => this.focusGameFrame(frame), 50);
                });
            }
            
            enhanceGameFrame(frame) {
                try {
                    const iframeDoc = frame.contentWindow.document;
                    const canvas = iframeDoc.querySelector('canvas');
                    
                    if (canvas) {
                        // Get game info for intelligent pointer lock
                        const gameTitle = document.getElementById('zoneName')?.textContent || '';
                        const gameUrl = frame.src || '';
                        
                        const usePointerLock = shouldUsePointerLock(gameTitle, gameUrl);
                        console.log(`Game: ${gameTitle}, Pointer Lock: ${usePointerLock}`);
                        
                        if (usePointerLock) {
                            // Only add pointer lock for FPS/3D games
                            canvas.addEventListener('click', (e) => {
                                e.preventDefault();
                                e.stopImmediatePropagation();
                                if (document.pointerLockElement !== canvas) {
                                    this.requestPointerLock(canvas);
                                }
                            }, { passive: false, capture: true });
                        }
                        
                        canvas.tabIndex = 0;
                        
                        // Enhanced event isolation
                        ['mousedown', 'mouseup', 'mousemove', 'wheel', 'contextmenu'].forEach(eventType => {
                            canvas.addEventListener(eventType, (e) => {
                                e.stopPropagation();
                                if (eventType === 'contextmenu') {
                                    e.preventDefault();
                                }
                            }, { passive: false, capture: true });
                        });
                        
                        ['keydown', 'keyup', 'keypress'].forEach(eventType => {
                            canvas.addEventListener(eventType, (e) => {
                                if (e.key !== 'Escape') {
                                    e.stopPropagation();
                                }
                            }, { passive: false, capture: true });
                        });
                    }
                    
                    iframeDoc.addEventListener('click', () => {
                        this.focusGameFrame(frame);
                    }, { passive: true });
                    
                } catch(e) {
                    console.log('Game enhancement setup error:', e);
                }
            }
            
            focusGameFrame(frame) {
                if (!frame) return;
                
                try {
                    frame.focus();
                    
                    if (frame.contentWindow) {
                        frame.contentWindow.focus();
                        
                        setTimeout(() => {
                            try {
                                if (frame.contentWindow.document && frame.contentWindow.document.body) {
                                    frame.contentWindow.document.body.focus();
                                }
                                
                                const canvas = frame.contentWindow.document.querySelector('canvas');
                                if (canvas) {
                                    canvas.focus();
                                }
                            } catch(e) {
                                console.log('Canvas focus error:', e);
                            }
                        }, 100);
                    }
                } catch(e) {
                    console.log('Frame focus error:', e);
                }
            }
            
            requestPointerLock(element) {
                if (element.requestPointerLock) {
                    element.requestPointerLock();
                } else if (element.mozRequestPointerLock) {
                    element.mozRequestPointerLock();
                } else if (element.webkitRequestPointerLock) {
                    element.webkitRequestPointerLock();
                }
            }
        }
        
        // Animation controller for smooth page transitions
        class AnimationController {
            static observeElements() {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('animate-in');
                        }
                    });
                });
                
                document.querySelectorAll('.feature-card, .metric-card').forEach(el => {
                    observer.observe(el);
                });
            }
            
            static addStaggeredAnimation() {
                const cards = document.querySelectorAll('.feature-card');
                cards.forEach((card, index) => {
                    card.style.animationDelay = `${index * 0.1}s`;
                });
            }
        }
        
        // Performance monitor for optimal user experience
        class PerformanceMonitor {
            constructor() {
                this.metrics = {
                    loadTime: 0,
                    interactionDelay: 0,
                    memoryUsage: 0
                };
                this.startTime = performance.now();
                this.init();
            }
            
            init() {
                window.addEventListener('load', () => {
                    this.metrics.loadTime = performance.now() - this.startTime;
                    console.log(`Page loaded in ${this.metrics.loadTime.toFixed(2)}ms`);
                });
                
                // Monitor memory usage if available
                if (performance.memory) {
                    setInterval(() => {
                        this.metrics.memoryUsage = performance.memory.usedJSHeapSize;
                    }, 5000);
                }
            }
        }
        
        // Initialize all systems when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            // Create advanced particle system
            createAdvancedParticles();
            
            // Initialize core systems
            const authManager = new AuthManager();
            const gameEnhancer = new GameEnhancer();
            const performanceMonitor = new PerformanceMonitor();
            
            // Setup animations
            AnimationController.observeElements();
            AnimationController.addStaggeredAnimation();
            
            // Global function exports for onclick handlers
            window.flipCard = () => window.flashcardManager?.flipCard();
            window.nextCard = () => window.flashcardManager?.nextCard();
            window.previousCard = () => window.flashcardManager?.previousCard();
            
            // Add smooth scrolling to navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);
                    
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
            
            // Feature card interactions
            document.querySelectorAll('.feature-card').forEach(card => {
                card.addEventListener('click', () => {
                    const feature = card.dataset.feature;
                    showNotification(`Learn more about ${feature} features!`, 'info');
                });
            });
            
            // Dynamic statistics updates
            const updateStats = () => {
                const stats = document.querySelectorAll('.stat-number');
                stats.forEach(stat => {
                    const current = parseInt(stat.textContent.replace(/[^\d]/g, ''));
                    const increment = Math.floor(Math.random() * 10) + 1;
                    const newValue = current + increment;
                    
                    if (stat.textContent.includes('M')) {
                        stat.textContent = `${(newValue / 1000000).toFixed(1)}M`;
                    } else if (stat.textContent.includes('K')) {
                        stat.textContent = `${Math.floor(newValue / 1000)}K`;
                    } else if (stat.textContent.includes('%')) {
                        stat.textContent = `${Math.min(100, newValue)}%`;
                    }
                });
            };
            
            // Update stats every 30 seconds for realism
            setInterval(updateStats, 30000);
            
            // Add typing animation to hero title
            const heroTitle = document.querySelector('.hero-title');
            if (heroTitle) {
                const originalText = heroTitle.textContent;
                heroTitle.textContent = '';
                
                let i = 0;
                const typeWriter = () => {
                    if (i < originalText.length) {
                        heroTitle.textContent += originalText.charAt(i);
                        i++;
                        setTimeout(typeWriter, 50);
                    }
                };
                
                setTimeout(typeWriter, 1000);
            }
            
            // Progressive enhancement for better user experience
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js').catch(() => {
                    console.log('Service worker registration failed');
                });
            }
            
            // Preload critical resources
            const criticalImages = [
                'https://cdn-icons-png.flaticon.com/512/3135/3135768.png',
                'https://cdn-icons-png.flaticon.com/512/747/747310.png'
            ];
            
            criticalImages.forEach(src => {
                const link = document.createElement('link');
                link.rel = 'preload';
                link.as = 'image';
                link.href = src;
                document.head.appendChild(link);
            });
            
            // Add keyboard shortcuts for power users
            document.addEventListener('keydown', (e) => {
                if (e.ctrlKey || e.metaKey) {
                    switch(e.key) {
                        case 'k':
                            e.preventDefault();
                            document.getElementById('v-user')?.focus();
                            break;
                        case 'Enter':
                            if (document.activeElement?.tagName === 'INPUT') {
                                document.getElementById('loginBtn')?.click();
                            }
                            break;
                    }
                }
                
                // Flashcard shortcuts
                if (window.flashcardManager && document.getElementById('flashcard-system')?.style.display !== 'none') {
                    switch(e.key) {
                        case ' ':
                            e.preventDefault();
                            window.flashcardManager.flipCard();
                            break;
                        case 'ArrowLeft':
                            e.preventDefault();
                            window.flashcardManager.previousCard();
                            break;
                        case 'ArrowRight':
                            e.preventDefault();
                            window.flashcardManager.nextCard();
                            break;
                    }
                }
            });
            
            // Add mouse trail effect for premium feel
            let mouseTrail = [];
            const maxTrailLength = 20;
            
            document.addEventListener('mousemove', (e) => {
                mouseTrail.push({ x: e.clientX, y: e.clientY, time: Date.now() });
                
                if (mouseTrail.length > maxTrailLength) {
                    mouseTrail.shift();
                }
                
                // Clean up old trail points
                mouseTrail = mouseTrail.filter(point => Date.now() - point.time < 1000);
            });
            
            // Initialize tooltips for better UX
            const addTooltip = (element, text) => {
                element.addEventListener('mouseenter', (e) => {
                    const tooltip = document.createElement('div');
                    tooltip.className = 'tooltip';
                    tooltip.textContent = text;
                    tooltip.style.cssText = `
                        position: fixed;
                        background: rgba(0, 0, 0, 0.8);
                        color: white;
                        padding: 8px 12px;
                        border-radius: 6px;
                        font-size: 14px;
                        z-index: 1000001;
                        pointer-events: none;
                        left: ${e.clientX + 10}px;
                        top: ${e.clientY - 30}px;
                    `;
                    document.body.appendChild(tooltip);
                    
                    element.addEventListener('mouseleave', () => {
                        document.body.removeChild(tooltip);
                    }, { once: true });
                });
            };
            
            // Add tooltips to interactive elements
            document.querySelectorAll('.deck-option').forEach(deck => {
                addTooltip(deck, `Study ${deck.textContent.trim()} flashcards`);
            });
            
            document.querySelectorAll('.mode-card').forEach(mode => {
                addTooltip(mode, `Switch to ${mode.querySelector('.mode-title').textContent} study mode`);
            });
            
            // Initialize advanced analytics simulation
            const analyticsData = {
                dailyStreak: 7,
                cardsReviewed: 156,
                timeStudied: 2.4,
                weeklyProgress: [85, 92, 78, 95, 88, 91, 96]
            };
            
            const updateAnalytics = () => {
                const streakEl = document.getElementById('study-streak');
                const cardsEl = document.getElementById('cards-reviewed');
                const timeEl = document.getElementById('time-studied');
                
                if (streakEl) streakEl.textContent = analyticsData.dailyStreak;
                if (cardsEl) cardsEl.textContent = analyticsData.cardsReviewed;
                if (timeEl) timeEl.textContent = `${analyticsData.timeStudied}h`;
            };
            
            updateAnalytics();
            
            // Final system check
            console.log('✅ Vortex Learning Platform initialized successfully');
            console.log('🎯 All systems operational');
            console.log('🚀 Ready for advanced learning experience');
            
            // Show welcome message after everything loads
            setTimeout(() => {
                showNotification('Welcome to Vortex! Start your learning journey today.', 'success', 5000);
            }, 2000);
        });
        
        // Export global functions for external use
        window.VortexPlatform = {
            showNotification,
            unlockGNMath,
            shouldUsePointerLock
        };
    </script>
</body>
</html>        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            box-shadow: var(--shadow-light);
        }
        
        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-medium);
        }
        
        .card-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
        }
        
        .stat-group {
            text-align: center;
        }
        
        .stat-value {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
        }
        
        .stat-title {
            font-size: 12px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 4px;
        }
        
        /* Advanced study modes */
        .study-modes {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin: 24px 0;
        }
        
        .mode-card {
            background: rgba(102, 126, 234, 0.05);
            border: 2px solid rgba(102, 126, 234, 0.1);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .mode-card:hover, .mode-card.active {
            background: rgba(102, 126, 234, 0.1);
            border-color: #667eea;
            transform: translateY(-2px);
        }
        
        .mode-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }
        
        .mode-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        
        .mode-desc {
            font-size: 12px;
            color: var(--text-muted);
        }
        
        /* Performance analytics */
        .analytics-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 32px;
            margin-top: 24px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: var(--shadow-medium);
        }
        
        .analytics-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .analytics-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
        }
        
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            box-shadow: var(--shadow-light);
        }
        
        .metric-value {
            font-size: 32px;
            font-weight: 800;
            color: #667eea;
            margin-bottom: 8px;
        }
        
        .metric-label {
            font-size: 14px;
            color: var(--text-muted);
            font-weight: 500;
        }
        
        .metric-change {
            font-size: 12px;
            font-weight: 600;
            margin-top: 4px;
        }
        
        .metric-change.positive {
            color: #10b981;
        }
        
        .metric-change.negative {
            color: #ef4444;
        }
        
        /* Enhanced footer */
        .main-footer {
            position: relative;
            z-index: 10;
            background: var(--dark-glass);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--border-color);
            padding: 40px 0;
            margin-top: auto;
        }
        
        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 40px;
        }
        
        .footer-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .footer-section h4 {
            font-size: 18px;
            font-weight: 700;
            color: white;
            margin-bottom: 16px;
        }
        
        .footer-section p {
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .footer-links {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .footer-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            font-size: 14px;
            transition: color 0.3s ease;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        .footer-bottom {
            padding-top: 24px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
        }
        
        .social-links {
            display: flex;
            gap: 16px;
        }
        
        .social-link {
            width: 40px;
            height: 40px;
            background: var(--light-glass);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            font-size: 18px;
            transition: all 0.3s ease;
        }
        
        .social-link:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-light);
        }
        
        /* Secret hotspot */
        #secret-hotspot {
            position: fixed;
            width: 20px;
            height: 20px;
            right: 6px;
            bottom: 6px;
            z-index: 1000000;
            opacity: 0;
            pointer-events: auto;
            cursor: default;
        }
        
        /* Responsive design */
        @media (max-width: 1200px) {
            .content-wrapper {
                flex-direction: column;
                gap: 40px;
            }
            
            .study-section {
                width: 100%;
                max-width: 600px;
                margin: 0 auto;
            }
            
            .features-showcase {
                grid-template-columns: 1fr;
            }
            
            .footer-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                padding: 0 20px;
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .header-nav {
                order: -1;
            }
            
            .header-stats {
                display: none;
            }
            
            .content-wrapper {
                padding: 40px 20px;
            }
            
            .hero-title {
                font-size: 36px;
            }
            
            .cta-buttons {
                flex-direction: column;
            }
            
            .deck-grid {
                grid-template-columns: 1fr;
            }
            
            .analytics-grid {
                grid-template-columns: 1fr;
            }
            
            .footer-grid {
                grid-template-columns: 1fr;
                gap: 32px;
            }
            
            .footer-bottom {
                flex-direction: column;
                gap: 16px;
                text-align: center;
            }
        }
        
        @media (max-width: 480px) {
            .brand-name {
                font-size: 24px;
            }
            
            .hero-title {
                font-size: 28px;
            }
            
            .study-card {
                padding: 24px;
            }
            
            .flashcard {
                height: 280px;
            }
            
            .flashcard-front, .flashcard-back {
                padding: 24px;
                font-size: 16px;
            }
        }
        
        /* Advanced animations */
        @keyframes slideInFromLeft {
            0% {
                opacity: 0;
                transform: translateX(-50px);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideInFromRight {
            0% {
                opacity: 0;
                transform: translateX(50px);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes fadeInUp {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-in {
            animation: fadeInUp 0.8s ease-out;
        }
        
        .animate-left {
            animation: slideInFromLeft 1s ease-out;
        }
        
        .animate-right {
            animation: slideInFromRight 1s ease-out;
        }
        
        /* Loading states */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }
        
        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Notification system */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--primary-gradient);
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: var(--shadow-heavy);
            z-index: 1000000;
            transform: translateX(400px);
            transition: transform 0.4s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background: var(--success-gradient);
        }
        
        .notification.error {
            background: var(--warning-gradient);
        }
    </style>
</head>

<body>
    <!-- ---------- VORTEX FLASHCARD OVERLAY ---------- -->
    <div id="vortex-overlay">
        <!-- Enhanced particles system -->
        <div class="particles-container" id="particles-container"></div>
        
        <!-- Main header -->
        <header class="main-header">
            <div class="header-content">
                <div class="brand-section">
                    <div class="logo-container">
                        <div class="logo-bg"></div>
                        <div class="logo-text">V</div>
                    </div>
                    <div class="brand-info">
                        <div class="brand-name">Vortex</div>
                        <div class="brand-tagline">AI-Powered Learning Platform</div>
                    </div>
                </div>
                
                <nav class="header-nav">
                    <a href="#features" class="nav-link">Features</a>
                    <a href="#pricing" class="nav-link">Pricing</a>
                    <a href="#about" class="nav-link">About</a>
                    <a href="#contact" class="nav-link">Contact</a>
                </nav>
                
                <div class="header-stats">
                    <div class="stat-item">
                        <div class="stat-number">15.2M</div>
                        <div class="stat-label">Cards Studied</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">847K</div>
                        <div class="stat-label">Active Users</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">98%</div>
                        <div class="stat-label">Success Rate</div>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Main content -->
        <div class="content-wrapper">
            <section class="hero-section animate-left">
                <div class="hero-content">
                    <h1 class="hero-title">Master Any Subject with Intelligent Flashcards</h1>
                    <p class="hero-subtitle">Transform your learning with AI-powered spaced repetition, beautiful animations, advanced analytics, and personalized study paths that adapt to your unique learning style.</p>
                    
                    <div class="cta-buttons">
                        <a href="#study" class="cta-primary">Start Learning Free</a>
                        <a href="#demo" class="cta-secondary">Watch Demo</a>
                    </div>
                </div>
                
                <div class="features-showcase">
                    <div class="feature-card" data-feature="ai">
                        <span class="feature-icon">🧠</span>
                        <div class="feature-title">AI-Powered Algorithm</div>
                        <div class="feature-description">Our neural network analyzes your learning patterns and optimizes card scheduling for maximum retention and efficiency.</div>
                    </div>
                    <div class="feature-card" data-feature="analytics">
                        <span class="feature-icon">📊</span>
                        <div class="feature-title">Advanced Analytics</div>
                        <div class="feature-description">Track your progress with detailed statistics, heat maps, and personalized insights to optimize your study sessions.</div>
                    </div>
                    <div class="feature-card" data-feature="social">
                        <span class="feature-icon">👥</span>
                        <div class="feature-title">Social Learning</div>
                        <div class="feature-description">Join study groups, share decks, and compete with friends to make learning more engaging and motivating.</div>
                    </div>
                    <div class="feature-card" data-feature="mobile">
                        <span class="feature-icon">📱</span>
                        <div class="feature-title">Cross-Platform Sync</div>
                        <div class="feature-description">Study anywhere with seamless synchronization across all your devices - desktop, tablet, and mobile.</div>
                    </div>
                </div>
            </section>
            
            <aside class="study-section animate-right">
                <div class="study-card">
                    <div class="study-header">
                        <h2 class="study-title">Start Your Journey</h2>
                        <p class="study-subtitle">Join millions of students who have transformed their learning with Vortex. Create your free account and begin mastering any subject today.</p>
                    </div>
                    
                    <form class="login-form" id="login-form">
                        <div class="input-group">
                            <input type="text" id="v-user" class="input" placeholder=" " required>
                            <label for="v-user" class="input-label">Email Address</label>
                        </div>
                        <div class="input-group">
                            <input type="password" id="v-password" class="input" placeholder=" " required>
                            <label for="v-password" class="input-label">Password</label>
                        </div>
                        <button type="submit" class="login-btn" id="loginBtn">
                            <span class="btn-text">Begin Study Session</span>
                            <span class="btn-spinner" style="display: none;"></span>
                        </button>
                        <div class="login-error" id="loginError">Invalid credentials. Please check your email and password.</div>
                    </form>
                    
                    <div class="flashcard-system" id="flashcard-system">
                        <div class="deck-selector">
                            <h3 class="deck-title">Choose Your Study Deck</h3>
                            <div class="deck-grid">
                                <div class="deck-option active" data-deck="mathematics">
                                    📐 Mathematics
                                </div>
                                <div class="deck-option" data-deck="science">
                                    🔬 Science
                                </div>
                                <div class="deck-option" data-deck="history">
                                    📚 History
                                </div>
                                <div class="deck-option" data-deck="languages">
                                    🌍 Languages
                                </div>
                                <div class="deck-option" data-deck="programming">
                                    💻 Programming
                                </div>
                                <div class="deck-option" data-deck="business">
                                    💼 Business
                                </div>
                            </div>
                        </div>
                        
                        <div class="study-modes">
                            <div class="mode-card active" data-mode="flashcards">
                                <div class="mode-icon">🃏</div>
                                <div class="mode-title">Flashcards</div>
                                <div class="mode-desc">Classic flip-to-reveal</div>
                            </div>
                            <div class="mode-card" data-mode="quiz">
                                <div class="mode-icon">📝</div>
                                <div class="mode-title">Quiz Mode</div>
                                <div class="mode-desc">Multiple choice</div>
                            </div>
                            <div class="mode-card" data-mode="spaced">
                                <div class="mode-icon">⏰</div>
                                <div class="mode-title">Spaced Rep</div>
                                <div class="mode-desc">AI-optimized timing</div>
                            </div>
                            <div class="mode-card" data-mode="typing">
                                <div class="mode-icon">⌨️</div>
                                <div class="mode-title">Type Mode</div>
                                <div class="mode-desc">Active recall</div>
                            </div>
                        </div>
                        
                        <div class="flashcard-container">
                            <div class="flashcard" id="flashcard">
                                <div class="flashcard-inner">
                                    <div class="flashcard-front">
                                        <div class="card-content">
                                            <div class="card-type" id="card-type-front">Question</div>
                                            <div class="card-text" id="card-question">Click to start your study session!</div>
                                        </div>
                                    </div>
                                    <div class="flashcard-back">
                                        <div class="card-content">
                                            <div class="card-type" id="card-type-back">Answer</div>
                                            <div class="card-text" id="card-answer">Your answer will appear here</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="progress-section">
                            <div class="progress-header">
                                <span class="progress-info">
                                    Card <span id="current-card-num">1</span> of <span id="total-cards-num">25</span>
                                </span>
                                <span class="progress-info">
                                    <span id="deck-name-display">Mathematics</span> Deck
                                </span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progress-fill"></div>
                            </div>
                        </div>
                        
                        <div class="card-controls">
                            <button class="control-btn btn-secondary" onclick="previousCard()">
                                ← Previous
                            </button>
                            <button class="control-btn btn-secondary" onclick="flipCard()">
                                🔄 Flip
                            </button>
                            <button class="control-btn btn-primary" onclick="nextCard()">
                                Next →
                            </button>
                        </div>
                        
                        <div class="card-stats">
                            <div class="stat-group">
                                <div class="stat-value" id="mastered-count">0</div>
                                <div class="stat-title">Mastered</div>
                            </div>
                            <div class="stat-group">
                                <div class="stat-value" id="learning-count">25</div>
                                <div class="stat-title">Learning</div>
                            </div>
                            <div class="stat-group">
                                <div class="stat-value" id="accuracy-rate">0%</div>
                                <div class="stat-title">Accuracy</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="analytics-section" id="analytics-section" style="display: none;">
                    <div class="analytics-header">
                        <span class="feature-icon">📈</span>
                        <div class="analytics-title">Your Performance</div>
                    </div>
                    <div class="analytics-grid">
                        <div class="metric-card">
                            <div class="metric-value" id="study-streak">7</div>
                            <div class="metric-label">Day Streak</div>
                            <div class="metric-change positive">+2 from last week</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="cards-reviewed">156</div>
                            <div class="metric-label">Cards Today</div>
                            <div class="metric-change positive">+23% vs average</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="time-studied">2.4h</div>
                            <div class="metric-label">Time Today</div>
                            <div class="metric-change positive">+15 min</div>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
        
        <!-- Enhanced footer -->
        <footer class="main-footer">
            <div class="footer-content">
                <div class="footer-grid">
                    <div class="footer-section">
                        <h4>Vortex Education</h4>
                        <p>Empowering learners worldwide with AI-powered flashcards and adaptive study technology. Join millions of students who have transformed their learning experience.</p>
                        <div class="social-links">
                            <a href="#" class="social-link">📘</a>
                            <a href="#" class="social-link">🐦</a>
                            <a href="#" class="social-link">📷</a>
                            <a href="#" class="social-link">💼</a>
                        </div>
                    </div>
                    <div class="footer-section">
                        <h4>Product</h4>
                        <ul class="footer-links">
                            <li><a href="#">Features</a></li>
                            <li><a href="#">Pricing</a></li>
                            <li><a href="#">API</a></li>
                            <li><a href="#">Mobile Apps</a></li>
                            <li><a href="#">Premium</a></li>
                        </ul>
                    </div>
                    <div class="footer-section">
                        <h4>Company</h4>
                        <ul class="footer-links">
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Careers</a></li>
                            <li><a href="#">Press</a></li>
                            <li><a href="#">Blog</a></li>
                            <li><a href="#">Investors</a></li>
                        </ul>
                    </div>
                    <div class="footer-section">
                        <h4>Support</h4>
                        <ul class="footer-links">
                            <li><a href="#">Help Center</a></li>
                            <li><a href="#">Contact Us</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                            <li><a href="#">Terms of Service</a></li>
                            <li><a href="#">Security</a></li>
                        </ul>
                    </div>
                </div>
                <div class="footer-bottom">
                    <div>© 2024 Vortex Education Technologies, Inc. All rights reserved.</div>
                    <div>Made with ❤️ for learners worldwide</div>
                </div>
            </div>
        </footer>
        
        <!-- Secret hotspot -->
        <div id="secret-hotspot"></div>
    </div>

    <!-- ---------- ORIGINAL GN-MATH CONTENT (completely unchanged) ---------- -->
    <header>
        <div class="header-content">
            <div class="logo">gn-math</div>
            <div class="search-container">
                <input type="text" id="searchBar" placeholder="Search zones..." oninput="filterZones()">
                <select id="sortOptions" onchange="sortZones()">
                    <option value="name">Name</option>
                    <option value="id">ID (Date)</option>
                    <option value="popular">Popular</option>
                </select>
            </div>
            <div class="control-buttons">
                <button id="settings" style="background-color: var(--primary-color); color: white; border: none; border-radius: 4px; padding: 0.5rem 1rem; font-size: 16px; cursor: pointer;">Settings</button>
            </div>
        </div>
    </header>

    <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-client="ca-pub-5521219086088837" data-ad-slot="5549138288" data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

    <main>
        <details id="featuredZonesWrapper" open>
            <summary id="allZonesSummary" style="font-size: 1.2rem; font-weight: bold; cursor: pointer;">Featured Zones</summary>
            <div id="featuredZones" class="zone-container"></div>
        </details>
        <br><hr><br>
        <details id="allZonesWrapper" open>
            <summary id="allSummary" style="font-size: 1.2rem; font-weight: bold; cursor: pointer;">All Zones</summary>
            <div id="container">Loading...</div>
        </details>
    </main>

    <div id="zoneViewer">
        <div class="zone-header">
            <div class="zone-title">
                <h2 id="zoneName">zone</h2>
                <span id="zoneId" style="display: none;"></span>
                <a id="zoneAuthor" href="#" target="_blank">by Author</a>
            </div>
            <div class="zone-controls">
                <button onclick="fullscreenZone()">Fullscreen</button>
                <button onclick="aboutBlank()">Open in New Tab</button>
                <button onclick="downloadZone()">Download</button>
                <button onclick="closeZone()">Close</button>
            </div>
        </div>
        <iframe id="zoneFrame" 
                allow="fullscreen; autoplay; encrypted-media; keyboard; pointer-lock; gamepad; clipboard-read; clipboard-write" 
                sandbox="allow-forms allow-scripts allow-same-origin allow-popups allow-modals allow-pointer-lock allow-fullscreen"
                style="width: 100%; height: 100%; border: 0; display: block;"></iframe>
    </div>

    <div id="popupOverlay">
        <div class="popup">
            <div class="popup-header">
                <h3 id="popupTitle">Title</h3>
                <button id="popupClose" onclick="closePopup()">×</button>
            </div>
            <div id="popupBody">
                Content will be here
            </div>
        </div>
    </div>

    <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-client="ca-pub-5521219086088837" data-ad-slot="5549138288" data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

    <footer>
        <div class="footer-links">
            <a href="#" onclick="showContact(); return false;">Contact</a>
            <a href="#" onclick="loadPrivacy(); return false;">Privacy Policy</a>
            <a href="javascript:saveData()">Export Data</a>
            <a href="#" onclick="document.getElementById('importData').click(); return false;">Import Data</a>
            <input type="file" id="importData" style="display: none;" onchange="loadData(event)">
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        const search = new URLSearchParams(window.location.search);
        const privacy = search.get('privacy');
        if (privacy) {
            loadPrivacy();
        }
    </script>

    <script>
        // Game detection system - intelligent mouse lock based on game type
        const POINTER_LOCK_GAMES = [
            'eaglercraft', 'minecraft', 'fps', 'shooter', 'first-person', 
            '3d-game', 'webgl-game', 'unity', 'unreal'
        ];
        
        const NON_POINTER_LOCK_GAMES = [
            'puzzle', '2d-game', 'platformer', 'strategy', 'turn-based',
            'card-game', 'board-game', 'match-3', 'tetris'
        ];
        
        function shouldUsePointerLock(gameTitle<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vortex - AI-Powered Flashcard Learning Platform</title>
    <meta name="description" content="Master any subject with Vortex's AI-powered flashcard system. Spaced repetition, progress tracking, and adaptive learning for students worldwide.">
    <meta name="keywords" content="flashcards, study, learning, education, spaced repetition, AI, adaptive learning">
    <meta name="author" content="Vortex Education Technologies">
    
    <!-- --- KEEP original GN-Math head assets & analytics intact --- -->
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">
    <link rel="apple-touch-icon" href="/favicon.png">
    <script>
        window.addEventListener('beforeunload', function (event) {
            event.preventDefault();
            event.returnValue = '';
            return 'Are you sure you want to leave? Any unsaved changes will be lost.';
        });
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5521219086088837" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WX5VS54ZDW"></script>
    <meta name="google-adsense-account" content="ca-pub-5521219086088837">
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){ dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-WX5VS54ZDW');
    </script>
    <script async src="https://fundingchoicesmessages.google.com/i/pub-5521219086088837?ers=1"></script>
    <script>(function() {function signalGooglefcPresent() {if (!window.frames['googlefcPresent']) {if (document.body) {const iframe = document.createElement('iframe'); iframe.style = 'width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;'; iframe.style.display = 'none'; iframe.name = 'googlefcPresent'; document.body.appendChild(iframe);} else {setTimeout(signalGooglefcPresent, 0);}}}signalGooglefcPresent();})();</script>
    
    <!-- GN-Math loader (kept) -->
    <script src="https://cdn.jsdelivr.net/gh/gn-math/gn-math.github.io@main/gnmath.js"></script>
    <link rel="stylesheet" href="style.css">
    
    <!-- Enhanced font loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --accent-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            --warning-gradient: linear-gradient(135deg, #fc466b 0%, #3f5efb 100%);
            --dark-gradient: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            --light-glass: rgba(255, 255, 255, 0.1);
            --dark-glass: rgba(0, 0, 0, 0.2);
            --text-primary: #2d3748;
            --text-secondary: #4a5568;
            --text-muted: #718096;
            --border-color: rgba(255, 255, 255, 0.2);
            --shadow-light: 0 4px 16px rgba(0, 0, 0, 0.1);
            --shadow-medium: 0 8px 32px rgba(0, 0, 0, 0.15);
            --shadow-heavy: 0 20px 60px rgba(0, 0, 0, 0.2);
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            overflow-x: hidden;
        }
        
        /* Animated multi-layer background */
        #vortex-overlay {
            position: fixed;
            inset: 0;
            background: linear-gradient(-45deg, #667eea, #764ba2, #f093fb, #f5576c, #4facfe, #00f2fe);
            background-size: 600% 600%;
            animation: gradientShift 20s ease infinite;
            z-index: 999999;
            display: flex;
            flex-direction: column;
            color: white;
            overflow: auto;
            min-height: 100vh;
        }
        
        #vortex-overlay::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url('data:image/svg+xml;utf8,<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="0.5" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="0.3" fill="white" opacity="0.08"/><circle cx="50" cy="10" r="0.4" fill="white" opacity="0.12"/><circle cx="20" cy="80" r="0.2" fill="white" opacity="0.06"/><circle cx="90" cy="30" r="0.6" fill="white" opacity="0.15"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grain)"/></svg>') repeat;
            animation: grain 15s linear infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes grain {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-100px, -100px); }
        }
        
        /* Enhanced particles system */
        .particles-container {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 1;
        }
        
        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
        }
        
        .particle.small {
            width: 2px;
            height: 2px;
            animation: floatSmall 25s linear infinite;
        }
        
        .particle.medium {
            width: 4px;
            height: 4px;
            animation: floatMedium 20s linear infinite;
        }
        
        .particle.large {
            width: 6px;
            height: 6px;
            animation: floatLarge 30s linear infinite;
        }
        
        @keyframes floatSmall {
            0% { transform: translateY(100vh) translateX(-50px) rotate(0deg); opacity: 0; }
            5% { opacity: 1; }
            95% { opacity: 1; }
            100% { transform: translateY(-10vh) translateX(50px) rotate(360deg); opacity: 0; }
        }
        
        @keyframes floatMedium {
            0% { transform: translateY(100vh) translateX(-30px) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-10vh) translateX(30px) rotate(360deg); opacity: 0; }
        }
        
        @keyframes floatLarge {
            0% { transform: translateY(100vh) translateX(-20px) rotate(0deg); opacity: 0; }
            15% { opacity: 1; }
            85% { opacity: 1; }
            100% { transform: translateY(-10vh) translateX(20px) rotate(360deg); opacity: 0; }
        }
        
        /* Enhanced header with glassmorphism */
        .main-header {
            position: relative;
            z-index: 10;
            background: var(--light-glass);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border-bottom: 1px solid var(--border-color);
            padding: 20px 0;
            box-shadow: var(--shadow-light);
        }
        
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .brand-section {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .logo-container {
            position: relative;
            width: 60px;
            height: 60px;
        }
        
        .logo-bg {
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.7));
            border-radius: 16px;
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-medium);
            animation: logoFloat 6s ease-in-out infinite;
        }
        
        .logo-text {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: 900;
            color: #667eea;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-5px) rotate(5deg); }
        }
        
        .brand-info {
            display: flex;
            flex-direction: column;
        }
        
        .brand-name {
            font-size: 36px;
            font-weight: 900;
            background: linear-gradient(135deg, #fff, #e0e0e0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -1px;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            animation: textGlow 4s ease-in-out infinite alternate;
        }
        
        .brand-tagline {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.85);
            font-weight: 500;
            margin-top: -2px;
            letter-spacing: 0.5px;
        }
        
        @keyframes textGlow {
            0% { text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); }
            100% { text-shadow: 0 4px 20px rgba(255, 255, 255, 0.3); }
        }
        
        .header-nav {
            display: flex;
            gap: 32px;
            align-items: center;
        }
        
        .nav-link {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            font-weight: 500;
            font-size: 16px;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .nav-link::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--light-glass);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .nav-link:hover {
            color: white;
            transform: translateY(-1px);
        }
        
        .nav-link:hover::before {
            opacity: 1;
        }
        
        .header-stats {
            display: flex;
            gap: 24px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            font-weight: 600;
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .stat-number {
            font-size: 18px;
            font-weight: 800;
            color: white;
        }
        
        .stat-label {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.7);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* Main content area */
        .content-wrapper {
            position: relative;
            z-index: 10;
            flex: 1;
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 60px 40px;
            gap: 60px;
            align-items: flex-start;
        }
        
        .hero-section {
            flex: 1.2;
            display: flex;
            flex-direction: column;
            gap: 40px;
        }
        
        .hero-content {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }
        
        .hero-title {
            font-size: clamp(40px, 5vw, 68px);
            font-weight: 900;
            line-height: 1.1;
            background: linear-gradient(135deg, #fff 0%, #f0f0f0 50%, #e0e0e0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: heroGlow 5s ease-in-out infinite alternate;
            text-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes heroGlow {
            0% { 
                text-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
                filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.2));
            }
            100% { 
                text-shadow: 0 12px 48px rgba(0, 0, 0, 0.4);
                filter: drop-shadow(0 0 40px rgba(255, 255, 255, 0.4));
            }
        }
        
        .hero-subtitle {
            font-size: 22px;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 400;
            line-height: 1.6;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .cta-buttons {
            display: flex;
            gap: 16px;
            margin-top: 20px;
        }
        
        .cta-primary, .cta-secondary {
            padding: 16px 32px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 16px;
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }
        
        .cta-primary {
            background: var(--light-glass);
            color: white;
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-medium);
        }
        
        .cta-secondary {
            background: transparent;
            color: rgba(255, 255, 255, 0.9);
            border-color: rgba(255, 255, 255, 0.3);
        }
        
        .cta-primary:hover, .cta-secondary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-heavy);
        }
        
        .cta-primary::before, .cta-secondary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .cta-primary:hover::before, .cta-secondary:hover::before {
            left: 100%;
        }
        
        /* Enhanced feature showcase */
        .features-showcase {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
            margin-top: 40px;
        }
        
        .feature-card {
            background: var(--light-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 32px;
            transition: all 0.4s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .feature-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--shadow-heavy);
            border-color: rgba(255, 255, 255, 0.4);
        }
        
        .feature-card:hover::before {
            opacity: 1;
        }
        
        .feature-icon {
            font-size: 48px;
            margin-bottom: 16px;
            display: block;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
        }
        
        .feature-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 12px;
            color: white;
        }
        
        .feature-description {
            font-size: 15px;
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.5;
        }
        
        /* Study section with advanced styling */
        .study-section {
            width: 450px;
            display: flex;
            flex-direction: column;
            gap: 32px;
        }
        
        .study-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-radius: 24px;
            padding: 40px;
            box-shadow: var(--shadow-heavy);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: var(--text-primary);
            position: relative;
            overflow: hidden;
        }
        
        .study-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            animation: cardRotate 10s linear infinite;
            z-index: -1;
        }
        
        @keyframes cardRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .study-header {
            text-align: center;
            margin-bottom: 32px;
        }
        
        .study-title {
            font-size: 28px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .study-subtitle {
            font-size: 15px;
            color: var(--text-muted);
            line-height: 1.5;
        }
        
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .input-group {
            position: relative;
        }
        
        .input {
            width: 100%;
            padding: 18px 24px;
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            font-size: 16px;
            font-family: inherit;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
        }
        
        .input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
            background: rgba(255, 255, 255, 0.95);
        }
        
        .input-label {
            position: absolute;
            left: 24px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px;
            color: var(--text-muted);
            transition: all 0.3s ease;
            pointer-events: none;
            background: white;
            padding: 0 8px;
        }
        
        .input:focus + .input-label,
        .input:not(:placeholder-shown) + .input-label {
            top: 0;
            font-size: 12px;
            color: #667eea;
            font-weight: 600;
        }
        
        .login-btn {
            width: 100%;
            padding: 18px;
            border-radius: 16px;
            border: 0;
            background: var(--primary-gradient);
            color: white;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-medium);
        }
        
        .login-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s;
        }
        
        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-heavy);
        }
        
        .login-btn:hover::before {
            left: 100%;
        }
        
        .login-error {
            color: #e53e3e;
            font-size: 14px;
            text-align: center;
            display: none;
            background: #fed7d7;
            padding: 12px 16px;
            border-radius: 12px;
            margin-top: 12px;
        }
        
        /* Advanced flashcard system */
        .flashcard-system {
            margin-top: 32px;
            display: none;
        }
        
        .deck-selector {
            margin-bottom: 24px;
        }
        
        .deck-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 16px;
            text-align: center;
        }
        
        .deck-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        .deck-option {
            padding: 16px 20px;
            background: rgba(102, 126, 234, 0.05);
            border: 2px solid rgba(102, 126, 234, 0.1);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .deck-option:hover, .deck-option.active {
            background: rgba(102, 126, 234, 0.15);
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: var(--shadow-light);
            color: #667eea;
        }
        
        .flashcard-container {
            margin: 24px 0;
            perspective: 1000px;
        }
        
        .flashcard {
            width: 100%;
            height: 320px;
            position: relative;
            cursor: pointer;
        }
        
        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s cubic-bezier(0.4, 0.2, 0.2, 1);
            transform-style: preserve-3d;
        }
        
        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }
        
        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 32px;
            font-size: 18px;
            font-weight: 600;
            box-shadow: var(--shadow-medium);
            transition: all 0.3s ease;
        }
        
        .flashcard-front {
            background: var(--primary-gradient);
            color: white;
        }
        
        .flashcard-back {
            background: var(--secondary-gradient);
            color: white;
            transform: rotateY(180deg);
        }
        
        .flashcard:hover .flashcard-front,
        .flashcard:hover .flashcard-back {
            box-shadow: var(--shadow-heavy);
        }
        
        .card-content {
            text-align: center;
            line-height: 1.4;
        }
        
        .card-type {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .card-text {
            font-size: 20px;
            font-weight: 600;
        }
        
        .progress-section {
            margin: 24px 0;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .progress-info {
            font-size: 14px;
            color: var(--text-muted);
            font-weight: 500;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .progress-fill {
            height: 100%;
            background: var(--primary-gradient);
            border-radius: 4px;
            transition: width 0.8s cubic-bezier(0.4, 0.2, 0.2, 1);
            position: relative;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 20px;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3));
            animation: progressShine 2s ease-in-out infinite;
        }
        
        @keyframes progressShine {
            0% { transform: translateX(-20px); }
            100% { transform: translateX(20px); }
        }
        
        .card-controls {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }
        
        .control-btn {
            flex: 1;
            padding: 14px;
            border: 0;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn-secondary {
            background: #f7fafc;
            color: var(--text-secondary);
            border: 1px solid #e2e8f0;
        }
        
        .btn-secondary:hover {
            background: #edf2f7;
            transform: translateY(-1px);
            box-shadow: var(--shadow-light);
        }
        
        .btn
